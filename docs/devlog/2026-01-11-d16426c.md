# 2026-01-11 d16426c

- Author: (unknown, created via Warp Agent)
- Commit: d16426c
- Date: 2026-01-11
- Subject: Add pytest fixtures and auth tests

## 변경 요약
- FastAPI 앱에 대한 기본 테스트 구조(`tests/`) 추가
- FastAPI `TestClient`와 DB 세션을 제공하는 pytest fixture 정의
- JWT 로그인 및 `/users/me` 엔드포인트에 대한 통합 테스트 작성
- 테스트 실행을 위한 의존성(`pytest`, `httpx`) 추가

## 세부 변경 사항
- `requirements.txt`
  - 테스트 관련 패키지 추가: `pytest`, `httpx`
- `tests/conftest.py`
  - `setup_database` (session, autouse): 테스트 세션 시작 시 SQLite DB 테이블 생성
  - `db` fixture: `SessionLocal` 기반 DB 세션을 각 테스트에 주입
  - `client` fixture: `TestClient(app)` 제공
  - `test_user` fixture: username이 `test` 인 유저를 DB에 생성/보장 (비밀번호 `test1234`)
- `tests/test_auth.py`
  - `test_read_root`: `/` 엔드포인트가 200과 정해진 JSON을 반환하는지 검증
  - `test_login_success_and_get_me`: 
    - `/auth/token` 에 올바른 자격증명(`test` / `test1234`)으로 POST → access_token 발급 검증
    - 발급된 토큰으로 `/users/me` 호출 → username, full_name, disabled 플래그 검증
  - `test_login_failure_wrong_password`: 잘못된 비밀번호로 `/auth/token` 호출 시 401 및 에러 메시지 검증

## 테스트
- [x] `pytest` 실행 시 3개 테스트 모두 통과 확인
- [x] 테스트 실행 시 DB 세션/테이블 생성이 정상적으로 동작하는지 확인

## 메모
- 현재 테스트는 실제 SQLite 파일(`app.db`)을 사용하므로, 필요하다면 추후 테스트 전용 DB URL(in-memory 등)로 분리하는 리팩터링을 고려
- 새로운 기능을 추가할 때는 항상 관련 테스트와 devlog 항목을 함께 추가하는 흐름으로 유지할 예정
